<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2"><i class="nav-icon fa fa-th"></i>Productos</h1>
        <div class="col-lg-4">
          <form class="d-flex">
            <input class="form-control me-2" type="search" placeholder="Buscar Producto" aria-label="Search">
            <button class="btn btn-outline-dark" type="submit">Buscar</button>
          </form>
        </div>
  </div>
  <div class="mt-5">
    <div class="row">
         
        <input type="button" value="Insertar Producto" class="btn btn-dark" (click)="mostrar_form('ver')"><hr>

      <div id='formulario' *ngIf="mform==true">
        
          <div class="row"> 
            <div class="col-lg-4">
              <input type="text" class="form-control" placeholder="Codigo" [(ngModel)]="obj_producto.codigo">
              <span style="color: red;" *ngIf="validar_codigo == false" >Insertar Codigo</span>
            </div>
            <div class="col-lg-4">
              <input type="text" class="form-control" placeholder="Nombre" [(ngModel)]="obj_producto.nombre">
              <span style="color: red;" *ngIf="validar_nombre == false" >Insertar Nombre del Producto</span>
            </div>
            <div class="col-lg-4">
              <select class="form-control form-select"  [(ngModel)]="obj_producto.fo_categoria">
                <option value="0" label="Seleccionar Categoria" selected="selected">Seleccione Categoria</option>
                <option *ngFor="let itemc of categoria" value="{{itemc.id_categoria}}">{{itemc.nombre}}</option>
              </select>
              <span style="color: red;" *ngIf="validar_categoria == false" >Seleccionar Categoria</span>
            </div>
          </div>
          <br>
          <div class="row"> 
            <div class="col-lg-4">
              <input type="number" class="form-control" placeholder="Precio Compra" [(ngModel)]="obj_producto.precio_compra">
              <span style="color: red;" *ngIf="validar_pcompra == false" >Insertar Precio de la Compra</span>
            </div>
            <div class="col-lg-4">
              <input type="number" class="form-control" placeholder="Precio Venta" [(ngModel)]="obj_producto.precio_venta">
              <span style="color: red;" *ngIf="validar_pventa == false" >Insertar Precio de la Venta</span>
            </div>
            <div class="col-lg-4">
              <input type="number" class="form-control" placeholder="Stock" [(ngModel)]="obj_producto.stock">
              <span style="color: red;" *ngIf="validar_stock == false" >Insertar Stock</span>
            </div>
          </div>
          <br>
          <div class="row"> 
            <div class="col-lg-4">
              <select class="form-control form-select"  [(ngModel)]="obj_producto.fo_proveedor">
                <option value="0" label="Seleccionar Proveedor" selected="selected">Seleccione Proveedor</option>
                <option *ngFor= "let itempr of proveedor" value="{{itempr.id_proveedor}}">{{itempr.nombre}}</option>
              </select>
              <span style="color: red;" *ngIf="validar_proveedor == false" >Seleccionar Proveedor</span>
            </div>
            <div class="col-lg-4">
              <input type="button" value="Guardar" class="btn btn-outline-dark" style="width: 100%;" (click)="validar('guardar')" 
              *ngIf="botones_form == false">
              <input type="button" value="Editar" class="btn btn-outline-dark" style="width: 100%;" (click)="validar('editar')"
              *ngIf="botones_form == true">
            </div>
            <div class="col-lg-4">
              <input type="button" value="Cancelar" class="btn btn-outline-danger" style="width: 100%;" (click)="mostrar_form('no ver')">
            </div>
          </div>
          <br>  
      </div>
      
    </div>
    

    



    <div class="row mt-3">
      <div class="col">
        <table class="table">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Nombre</th>
              <th scope="col">Categoria</th>
              <th scope="col">Precio Compra</th>
              <th scope="col">Precio Venta</th>
              <th scope="col">Stock</th>
              <th scope="col">Proveedor</th>
              <th scope="col">Acciones</th>
            </tr>
            <tr *ngFor="let item of products">
              <td>{{item.codigo}}</td>
              <td>{{item.nombre}}</td>
              <td>{{item.categoria}}</td>
              <td>{{item.precio_compra | currency}}</td>
              <td>{{item.precio_venta | currency}}</td>
              <td>{{item.stock}}</td>
              <td>{{item.proveedor}}</td>
              <td>
                <span class="fas fa-edit" style="color: blue; cursor: pointer" title="Editar" (click)
                ="cargar_datos(item, item.id_producto)"></span>
               <span class="fas fa-minus-square" style="color: red; cursor: pointer" title="Eliminar" (click)
               ="eliminar(item.id_producto)"></span>
              </td>
            </tr>
          </thead>
        </table>
      </div>
    </div>
  </div>
</main>
